import{o as te,i as ae,r as se}from"./store.Brw13Skc.js";import{j as oe,k as le,u as j,n as K,o as ce,q as g,v as ie,w as ne,x as ve,S as de,l as Y,a as fe,f as k,t as D,h as r,e as A,b as S,p as ue,c as be,g as x,m as _,i as n,y as m,r as u,s as G}from"./render.C_WyOvML.js";import{i as I,e as xe,a as me}from"./each.BqDerWM-.js";import{p as he,s as _e}from"./props.UQio_s8L.js";function pe(e,o,v=o){var c=new WeakSet;oe(e,"input",async t=>{var s=t?e.defaultValue:e.value;if(s=F(e)?W(s):s,v(s),g!==null&&c.add(g),await le(),s!==(s=o())){var i=e.selectionStart,b=e.selectionEnd,p=e.value.length;if(e.value=s??"",b!==null){var h=e.value.length;i===b&&b===p&&h>p?(e.selectionStart=h,e.selectionEnd=h):(e.selectionStart=i,e.selectionEnd=Math.min(b,h))}}}),(ce&&e.defaultValue!==e.value||j(o)==null&&e.value)&&(v(F(e)?W(e.value):e.value),g!==null&&c.add(g)),K(()=>{var t=o();if(e===document.activeElement){var s=ie??g;if(c.has(s))return}F(e)&&t===W(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function F(e){var o=e.type;return o==="number"||o==="range"}function W(e){return e===""?null:+e}function J(e,o){return e===o||e?.[de]===o}function ge(e={},o,v,c){return ne(()=>{var t,s;return K(()=>{t=s,s=[],j(()=>{e!==v(...s)&&(o(e,...s),t&&J(v(...t),e)&&o(null,...t))})}),()=>{ve(()=>{s&&J(v(...s),e)&&o(null,...s)})}}),e}var ye=k('<div class="pointer-events-none absolute inset-y-0 left-0 z-10 w-10 rounded-l-xl bg-gradient-to-r from-[color:var(--bg)] to-transparent"></div>'),we=k('<div class="pointer-events-none absolute inset-y-0 right-0 z-10 w-10 rounded-r-xl bg-gradient-to-l from-[color:var(--bg)] to-transparent"></div>'),Le=k('<button type="button"> </button>'),Se=k('<section class="flex flex-col gap-4" data-filter=""><div class="flex flex-col gap-2 text-center"><p class="text-sm text-[color:var(--muted)]">Выберите теги или введите слово, результат обновится автоматически.</p></div> <div class="flex flex-wrap items-center justify-center gap-2"><input type="search" placeholder="Поиск по заголовку и описанию" aria-label="Поиск по архиву" class="w-full rounded-2xl border border-[color:var(--border)] bg-[color:var(--surface)] px-4 py-2 text-sm md:w-96 focus:border-[color:var(--accent)] focus:outline-none"/> <button type="button" class="rounded-full border border-[color:var(--border)] bg-[color:var(--surface)] px-4 py-2 text-sm text-[color:var(--muted)] transition hover:text-[color:var(--text)]">Сбросить</button></div> <div class="relative w-full"><!> <!> <div class="w-full overflow-x-auto pb-1"><div class="flex w-max min-w-full items-center gap-2 whitespace-nowrap"></div></div></div> <div class="text-center text-sm text-[color:var(--muted)]">Найдено: <span> </span></div></section>');function Ce(e,o){be(o,!1);let v=he(o,"tags",24,()=>[]),c=_(""),t=_([]),s=_(0),i=_(),b=_(!1),p=_(!1);function h(a){r(t).includes(a)?n(t,r(t).filter(l=>l!==a)):n(t,[...r(t),a])}function N(){n(t,[]),n(c,"")}function E(){if(typeof document>"u")return;const a=document.querySelector("[data-posts]");if(!a)return;const l=r(t).map(f=>f.toLowerCase().trim()),d=r(c).toLowerCase().trim();let L=0;a.querySelectorAll("[data-tag]").forEach(f=>{const Z=(f.dataset.tag||"").split(",").map(z=>z.toLowerCase().trim()),$=(f.innerText||"").toLowerCase(),ee=l.length===0||l.some(z=>Z.includes(z)),re=d.length===0||$.includes(d);ee&&re?(f.classList.remove("hidden"),L+=1):f.classList.add("hidden")}),n(s,L)}function y(){if(!r(i))return;const a=r(i).scrollWidth-r(i).clientWidth;n(b,r(i).scrollLeft>2),n(p,r(i).scrollLeft<a-2)}te(()=>(E(),y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y))),Y(()=>r(c),()=>{r(c),E()}),Y(()=>r(t),()=>{r(t),E()}),fe(),ae();var T=Se(),q=m(x(T),2),C=x(q);se(C);var P=m(C,2);u(q);var M=m(q,2),R=x(M);{var Q=a=>{var l=ye();S(a,l)};I(R,a=>{r(b)&&a(Q)})}var V=m(R,2);{var U=a=>{var l=we();S(a,l)};I(V,a=>{r(p)&&a(U)})}var w=m(V,2),B=x(w);xe(B,5,v,me,(a,l)=>{var d=Le(),L=x(d,!0);u(d),D(f=>{_e(d,1,f),G(L,r(l))},[()=>(r(t),r(l),j(()=>`rounded-full border px-3 py-1.5 text-sm transition ${r(t).includes(r(l))?"border-[color:var(--accent)] bg-[color:var(--accent)] text-white":"border-[color:var(--border)] bg-[color:var(--surface)] text-[color:var(--text)] hover:border-[color:var(--accent)]"}`))]),A("click",d,()=>h(r(l))),S(a,d)}),u(B),u(w),ge(w,a=>n(i,a),()=>r(i)),u(M);var H=m(M,2),O=m(x(H)),X=x(O,!0);u(O),u(H),u(T),D(()=>G(X,r(s))),pe(C,()=>r(c),a=>n(c,a)),A("click",P,N),A("scroll",w,y),S(e,T),ue()}export{Ce as default};
