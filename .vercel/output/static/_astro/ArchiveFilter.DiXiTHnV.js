import{o as ue,i as fe,r as be,s as K}from"./store.FMwVHtbV.js";import{l as me,t as xe,u as _,r as ee,h as _e,c as E,p as he,e as pe,q as ge,S as we,a as N,b as ye,f as q,d as Q,g as t,i as O,j as C,k as Le,m as f,n as Ee,s as b,o as p,v,w as g,x as S,y as k}from"./render.BH1g6Squ.js";import{i as X,e as Se,a as ke}from"./each.Cq00zUU7.js";import{p as Te,s as Ae}from"./props.CLVXFHLu.js";import{D as Z,t as m}from"./i18n-runtime.B9_wYMFc.js";function Ce(e,s,x=s){var n=new WeakSet;me(e,"input",async a=>{var o=a?e.defaultValue:e.value;if(o=R(e)?V(o):o,x(o),E!==null&&n.add(E),await xe(),o!==(o=s())){var c=e.selectionStart,i=e.selectionEnd,y=e.value.length;if(e.value=o??"",i!==null){var h=e.value.length;c===i&&i===y&&h>y?(e.selectionStart=h,e.selectionEnd=h):(e.selectionStart=c,e.selectionEnd=Math.min(i,h))}}}),(_e&&e.defaultValue!==e.value||_(s)==null&&e.value)&&(x(R(e)?V(e.value):e.value),E!==null&&n.add(E)),ee(()=>{var a=s();if(e===document.activeElement){var o=he??E;if(n.has(o))return}R(e)&&a===V(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function R(e){var s=e.type;return s==="number"||s==="range"}function V(e){return e===""?null:+e}function $(e,s){return e===s||e?.[we]===s}function qe(e={},s,x,n){return pe(()=>{var a,o;return ee(()=>{a=o,o=[],_(()=>{e!==x(...o)&&(s(e,...o),a&&$(x(...a),e)&&s(null,...a))})}),()=>{ge(()=>{o&&$(x(...o),e)&&s(null,...o)})}}),e}var Me=q('<div class="pointer-events-none absolute inset-y-0 left-0 z-10 w-10 rounded-l-xl bg-gradient-to-r from-[color:var(--bg)] to-transparent"></div>'),ze=q('<div class="pointer-events-none absolute inset-y-0 right-0 z-10 w-10 rounded-r-xl bg-gradient-to-l from-[color:var(--bg)] to-transparent"></div>'),Fe=q('<button type="button"> </button>'),We=q('<section class="flex flex-col gap-4" data-filter=""><div class="flex flex-col gap-2 text-center"><p class="text-sm text-[color:var(--muted)]"> </p></div> <div class="flex flex-wrap items-center justify-center gap-2"><input type="search" class="w-full rounded-2xl border border-[color:var(--border)] bg-[color:var(--surface)] px-4 py-2 text-sm md:w-96 focus:border-[color:var(--accent)] focus:outline-none"/> <button type="button" class="rounded-full border border-[color:var(--border)] bg-[color:var(--surface)] px-4 py-2 text-sm text-[color:var(--muted)] transition hover:text-[color:var(--text)]"> </button></div> <div class="relative w-full"><!> <!> <div class="w-full overflow-x-auto pb-1"><div class="flex w-max min-w-full items-center gap-2 whitespace-nowrap"></div></div></div> <div class="text-center text-sm text-[color:var(--muted)]"> <span> </span></div></section>');function Ve(e,s){Ee(s,!1);let x=Te(s,"tags",24,()=>[]),n=p(""),a=p([]),o=p(0),c=p(Z),i=p(),y=p(!1),h=p(!1);function te(r){t(a).includes(r)?b(a,t(a).filter(l=>l!==r)):b(a,[...t(a),r])}function re(){b(a,[]),b(n,"")}function M(){if(typeof document>"u")return;const r=document.querySelector("[data-posts]");if(!r)return;const l=t(a).map(u=>u.toLowerCase().trim()),d=t(n).toLowerCase().trim();let w=0;r.querySelectorAll("[data-tag]").forEach(u=>{const ie=(u.dataset.tag||"").split(",").map(H=>H.toLowerCase().trim()),ne=(u.innerText||"").toLowerCase(),ve=l.length===0||l.some(H=>ie.includes(H)),de=d.length===0||ne.includes(d);ve&&de?(u.classList.remove("hidden"),w+=1):u.classList.add("hidden")}),b(o,w)}function T(){if(!t(i))return;const r=t(i).scrollWidth-t(i).clientWidth;b(y,t(i).scrollLeft>2),b(h,t(i).scrollLeft<r-2)}ue(()=>{const r=l=>{b(c,l?.detail?.locale||document.documentElement.getAttribute("data-locale")||Z)};return r(),window.addEventListener("unitone:locale-updated",r),M(),T(),window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T),window.removeEventListener("unitone:locale-updated",r)}}),N(()=>t(n),()=>{t(n),M()}),N(()=>t(a),()=>{t(a),M()}),ye(),fe();var z=We(),F=f(z),B=f(F),ae=f(B,!0);v(B),v(F);var W=g(F,2),L=f(W);be(L);var j=g(L,2),oe=f(j,!0);v(j),v(W);var D=g(W,2),P=f(D);{var se=r=>{var l=Me();C(r,l)};X(P,r=>{t(y)&&r(se)})}var U=g(P,2);{var le=r=>{var l=ze();C(r,l)};X(U,r=>{t(h)&&r(le)})}var A=g(U,2),Y=f(A);Se(Y,5,x,ke,(r,l)=>{var d=Fe(),w=f(d,!0);v(d),Q(u=>{Ae(d,1,u),k(w,t(l))},[()=>(t(a),t(l),_(()=>`rounded-full border px-3 py-1.5 text-sm transition ${t(a).includes(t(l))?"border-[color:var(--accent)] bg-[color:var(--accent)] text-white":"border-[color:var(--border)] bg-[color:var(--surface)] text-[color:var(--text)] hover:border-[color:var(--accent)]"}`))]),O("click",d,()=>te(t(l))),C(r,d)}),v(Y),v(A),qe(A,r=>b(i,r),()=>t(i)),v(D);var G=g(D,2),I=f(G),J=g(I),ce=f(J,!0);v(J),v(G),v(z),Q((r,l,d,w,u)=>{k(ae,r),K(L,"placeholder",l),K(L,"aria-label",d),k(oe,w),k(I,`${u??""} `),k(ce,t(o))},[()=>(S(m),t(c),_(()=>m(t(c),"archive.filterHint"))),()=>(S(m),t(c),_(()=>m(t(c),"archive.searchPlaceholder"))),()=>(S(m),t(c),_(()=>m(t(c),"archive.searchAria"))),()=>(S(m),t(c),_(()=>m(t(c),"common.reset"))),()=>(S(m),t(c),_(()=>m(t(c),"common.foundLabel")))]),Ce(L,()=>t(n),r=>b(n,r)),O("click",j,re),O("scroll",A,T),C(e,z),Le()}export{Ve as default};
