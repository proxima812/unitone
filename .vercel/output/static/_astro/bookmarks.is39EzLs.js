import{w as f,g as a}from"./store.FMwVHtbV.js";const d="unitone_bookmarks",r=f([]);let o=!1;function u(t){return Array.isArray(t)?t.filter(e=>e&&typeof e=="object").map(e=>{const i=e;return{id:String(i.id||""),title:String(i.title||""),description:i.description?String(i.description):"",date:i.date?String(i.date):"",href:String(i.href||"")}}).filter(e=>e.id&&e.href):[]}function s(){if(typeof window>"u")return[];try{return u(JSON.parse(window.localStorage.getItem(d)||"[]"))}catch{return[]}}function c(t){typeof window>"u"||(window.localStorage.setItem(d,JSON.stringify(t)),window.dispatchEvent(new CustomEvent("bookmarks-updated",{detail:{count:t.length}})))}function g(){o||typeof window>"u"||(o=!0,r.set(s()),window.addEventListener("storage",t=>{t.key===d&&r.set(s())}),r.subscribe(t=>{o&&c(t)}))}function l(t){const e=a(r);if(e.findIndex(n=>n.id===t.id)>-1){r.set(e.filter(n=>n.id!==t.id));return}r.set([...e,t])}function k(t){r.set(a(r).filter(e=>e.id!==t))}export{r as b,g as i,k as r,l as t};
