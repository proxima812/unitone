---
import Author from "./Author.astro"
import BookmarkToggle from "@/components/svelte/BookmarkToggle.svelte"

const { data, id } = Astro.props
---

<a
	data-tag={data.tags?.join(",") ?? ""}
	data-author={Array.isArray(data.author) ? data.author.join(",") : data.author ?? ""}
	href={`/archive/${id}/`}
	class="block relative"
>
	<div class="rounded-2xl p-2">
		<article
			class="flex h-full flex-col gap-3 rounded-2xl border border-[color:var(--border)] bg-[color:var(--surface)] p-5"
		>
			<h2 class="h-[56px] line-clamp-2 text-xl font-semibold leading-tight text-[color:var(--text)]">
				{data.title}
			</h2>
			<p class="h-[72px] line-clamp-3 text-[color:var(--muted)]">
				{data.description}
			</p>

			<div class="mt-auto flex items-center justify-between gap-2">
				<Author data={data} link={false} />
				{
					data.pubDate && (
						<time datetime={data.pubDate} class="text-sm text-[color:var(--muted)]">
							{new Date(data.pubDate).toLocaleDateString("ru-RU", {
								year: "numeric",
								month: "short",
								day: "numeric",
							})}
						</time>
					)
				}
			</div>

			<div class="pt-2">
				<BookmarkToggle
					client:load
					id={id}
					title={data.title}
					description={data.description || ""}
					date={String(data.pubDate || "")}
					href={`/archive/${id}/`}
					variant="card"
				/>
			</div>
		</article>
	</div>
</a>
